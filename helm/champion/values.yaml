# Default values for champion.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

image:
  repository: champion
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext:
  fsGroup: 1000

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false

service:
  type: ClusterIP
  port: 8080
  metricsPort: 9090

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: champion.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

resources:
  limits:
    cpu: 2000m
    memory: 4Gi
  requests:
    cpu: 500m
    memory: 1Gi

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Application configuration
config:
  environment: production
  logLevel: INFO
  clickhouse:
    host: clickhouse-service
    port: 9000
    database: champion_market
  mlflow:
    trackingUri: http://mlflow-service:5000
  prefect:
    apiUrl: http://prefect-service:4200/api

# Secrets (should be overridden in production)
# WARNING: Never use default passwords in production!
# Generate secure passwords using: openssl rand -base64 32
secrets:
  clickhouse:
    user: champion_user
    password: REPLACE_WITH_SECURE_PASSWORD

# Persistence
persistence:
  enabled: true
  storageClass: standard
  # Using ReadWriteOnce for compatibility with most storage classes
  # Change to ReadWriteMany if using NFS or cloud file systems
  accessMode: ReadWriteOnce
  size: 100Gi

# Health checks
healthCheck:
  livenessProbe:
    initialDelaySeconds: 40
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 20
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
